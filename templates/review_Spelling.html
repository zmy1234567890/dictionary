<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8" />
    <title>æ‹¼å†™æµ‹è¯• - èƒŒå•è¯ç³»ç»Ÿ</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/review.css') }}" />
    <style>
        /* æ–°å¢æ ·å¼ï¼Œé¿å…å’Œä¹‹å‰å†²çª */
        .word-text-sm {
            font-size: 1.2rem;
            font-weight: normal;
            margin-bottom: 1em;
            text-align: center;
        }

        .option-btn-lg {
            display: inline-block;
            padding: 12px 24px;
            font-size: 1.4rem;
            margin: 10px 8px;
            width: auto;
            min-width: 140px;
            border-radius: 8px;
            box-sizing: border-box;
            cursor: pointer;
        }

        .option-btn-lg:disabled.correct {
            background-color: #4caf50;
            color: white;
            cursor: default;
        }

        .option-btn-lg:disabled.incorrect {
            background-color: #e74c3c;
            color: white;
            cursor: default;
        }
    </style>
</head>

<body>
    <div class="container">
        <h2>æ‹¼å†™æµ‹è¯•</h2>
        
        {% if total == 0 %}
        <div class="section">
            <p class="completed-message"><br />ğŸ‰ ä»Šæ—¥çš„å¤ä¹ å·²å…¨éƒ¨å®Œæˆï¼<br /><br /><br /></p>
            <a href="{{ url_for('home') }}" class="action-btn">è¿”å›é¦–é¡µ</a>
        </div>
        
        {% elif finished %}
        <div class="section">
            <p class="score">
                ä½ å·²å®Œæˆæ‰€æœ‰é¢˜ç›®ï¼<br />
                æ€»å¾—åˆ†ï¼š<br />
                <span class="score-number">{{ score }}</span> / <span class="score-total">{{ total }}</span>
            </p>
            <a href="{{ url_for('home') }}" class="action-btn">è¿”å›é¦–é¡µ</a>
        </div>

        {% else %}
        <div class="section">
            <p>é¢˜ç›® {{ current + 1 }} / {{ total }}</p>

            <div class="card">
                <h3 class="word-title">é‡Šä¹‰ï¼š</h3>
                <h3 class="word-text-sm">{{ question.question }}</h3>

                <!-- æ‹¼å†™æµ‹è¯•ï¼Œé€‰è‹±æ–‡å•è¯ï¼ŒformåŠ classæ–¹ä¾¿æ ·å¼ -->
                <form method="post" class="options">
                    {% for option in question.options %}
                    <button type="submit" name="choice" value="{{ option }}" class="option-btn-lg
                            {% if selected %}
                                {% if option == question.answer %}correct
                                {% elif option == selected and not is_correct %}incorrect
                                {% endif %}
                            {% endif %}" {% if selected %} disabled {% endif %}>
                        {{ option }}
                    </button>
                    {% endfor %}
                    <input type="hidden" name="current" value="{{ current }}" />
                </form>
            </div>

            {% if selected %}
            {% if is_correct %}
            <p class="correct">âœ… æ­£ç¡®ï¼</p>
            {% else %}
            <p class="incorrect">âŒ é”™è¯¯ï¼Œæ­£ç¡®ç­”æ¡ˆæ˜¯ï¼š{{ question.answer }}</p>
            {% endif %}
            {% endif %}

            <form method="post">
                <input type="hidden" name="current" value="{{ current }}" />
                <button type="submit" name="action" value="prev" class="action-btn">â¬…ï¸ ä¸Šä¸€é¢˜</button>
                <button type="submit" name="action" value="next" class="action-btn">â¡ï¸ ä¸‹ä¸€é¢˜</button>
            </form>
        </div>
        {% endif %}
    </div>

    <button id="help-button" onclick="toggleHelpCard()">?</button>

    <!-- å¡ç‰‡å†…å®¹ -->
    <div id="help-card" style="display: none; position: absolute; top: 60px; right: 20px; width: 320px;
                    border: 1px solid #ccc; padding: 15px; border-radius: 8px;
                    background: #fefefe; box-shadow: 0 2px 8px rgba(0,0,0,0.15); z-index: 1000;">
        <p style="margin: 0; font-weight: bold; font-size: 1.1em;">å¸®åŠ©</p>
        <p style="margin-top: 10px; line-height: 1.5;">
            é€šè¿‡é€‰æ‹©é¢˜å½¢å¼æµ‹è¯•ç”¨æˆ·å¯¹å•è¯æ‹¼å†™çš„æŒæ¡æƒ…å†µï¼Œç”¨æˆ·æ ¹æ®ä¸­æ–‡é‡Šä¹‰é€‰æ‹©å¯¹åº”çš„è‹±æ–‡å•è¯ã€‚é¡µé¢æ˜¾ç¤ºå½“å‰è¿›åº¦ï¼Œæäº¤ç­”æ¡ˆåå³æ—¶åé¦ˆæ­£è¯¯å¹¶æ˜¾ç¤ºæ­£ç¡®ç­”æ¡ˆï¼Œç­”é¢˜å®Œæˆåå±•ç¤ºæ€»åˆ†ã€‚ç”¨æˆ·å¯é€šè¿‡"ä¸Šä¸€é¢˜/ä¸‹ä¸€é¢˜"æŒ‰é’®å¯¼èˆªï¼Œå…¨éƒ¨ç­”å®Œåæ˜¾ç¤ºæ€»å¾—åˆ†å¹¶å¯ä»¥è¿”å›é¦–é¡µã€‚
        </p>
        <p style="margin-top: 10px; line-height: 1.5; font-weight: bold;">å›ç­”é”™è¯¯çš„æƒ…å†µ:</p>
        <ul style="margin: 0 0 0 20px; line-height: 1.5;">
            <li>ã€Œæ¨¡ç³Šã€çš„å•è¯å°†è¢«æ ‡è®°ä¸ºã€Œä¸è®¤è¯†ã€ï¼Œé‡æ–°æ ¹æ®ã€Œä¸è®¤è¯†ã€çš„å¤ä¹ è®¡åˆ’ä»æ¬¡æ—¥å¼€å§‹è¿›è¡Œå¤ä¹ ã€‚</li>
            <li>ã€Œä¸è®¤è¯†ã€çš„å•è¯é‡æ–°æ ¹æ®ã€Œä¸è®¤è¯†ã€çš„å¤ä¹ è®¡åˆ’ä»æ¬¡æ—¥å¼€å§‹è¿›è¡Œå¤ä¹ ã€‚</li>
        </ul>
    </div>

    <script>
        function toggleHelpCard() {
            const card = document.getElementById("help-card");
            card.style.display = (card.style.display === "none" || card.style.display === "") ? "block" : "none";
        }
    </script>

</body>

</html>